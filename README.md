Pizza Restaurant RESTful API
This project implements a RESTful API for a Pizza Restaurant using Flask, Flask-SQLAlchemy, and Flask-Migrate. It follows the MVC (Model-View-Controller) pattern for better organization and maintainability.
Project Structure
├── server/
│   ├── __init__.py             # Flask app initialization
│   ├── app.py                  # Main application setup, registers blueprints
│   ├── config.py               # Database configuration
│   ├── models/                 # SQLAlchemy Models (data layer)
│   │   ├── __init__.py
│   │   ├── restaurant.py       # Restaurant model
│   │   ├── pizza.py            # Pizza model
│   │   └── restaurant_pizza.py # Join table for Restaurant and Pizza
│   ├── controllers/            # Route handlers (logic layer)
│   │   ├── __init__.py
│   │   ├── restaurant_controller.py # Routes for Restaurant resource
│   │   ├── pizza_controller.py      # Routes for Pizza resource
│   │   └── restaurant_pizza_controller.py # Routes for RestaurantPizza resource
│   └── seed.py                 # Script to seed the database
├── migrations/                 # Database migrations (generated by Flask-Migrate)
├── challenge-1-pizzas.postman_collection.json # Postman collection for testing
└── README.md                   # Project documentation

Setup Instructions
Follow these steps to set up and run the API locally.
Step 1: Clone the Repository
If you have already cloned the repository, skip this step. Otherwise, create a GitHub repository and clone it:
git clone https://github.com/your-username/pizza-api-challenge.git
cd pizza-api-challenge

Step 2: Create a Virtual Environment
Use pipenv for dependency management and install required packages:
pipenv install flask flask_sqlalchemy flask_migrate flask_restful
pipenv shell

Note: flask_restful is used for streamlined API development.
Step 3: Set Up the Database
Set the FLASK_APP environment variable and initialize the database:
export FLASK_APP=server/app.py
flask db init
flask db migrate -m "Initial migration"
flask db upgrade

Step 4: Seed the Database
Populate the database with initial data:
python server/seed.py

Step 5: Run the Application
Start the Flask development server:
flask run

The API will be available at http://127.0.0.1:5000.
Models
Restaurant

id: Primary Key
name: String
address: String
Relationships: Has many RestaurantPizzas (cascading delete enabled: deleting a Restaurant deletes associated RestaurantPizzas).

Pizza

id: Primary Key
name: String
ingredients: String
Relationships: Has many RestaurantPizzas.

RestaurantPizza (Join Table)

id: Primary Key
price: Integer (Validation: Must be between 1 and 30)
restaurant_id: Foreign Key to Restaurant
pizza_id: Foreign Key to Pizza
Relationships:
Belongs to Restaurant
Belongs to Pizza



API Endpoints
GET /restaurants

Description: Returns a list of all restaurants.
Example Request:GET http://127.0.0.1:5000/restaurants


Example Response:[
  {
    "id": 1,
    "name": "Derrick Pizzaria",
    "address": "Athi-River"
  },
  {
    "id": 2,
    "name": "Pizza innit",
    "address": "South B"
  },
  {
    "id": 3,
    "name": "Sanaipei Pizzaria",
    "address": "Utawala"
  }
]



GET /restaurants/:id

Description: Returns details of a single restaurant, including its associated pizzas.
Example Request:GET http://127.0.0.1:5000/restaurants/1


Example Success Response:{
  "id": 1,
  "name": "Derrick Pizzaria",
  "address": "Athi-River",
  "pizzas": [
    {
      "id": 1,
      "name": "Pepperoni",
      "ingredients": "Dough, Tomato Sauce, Cheese, Pepperoni"
    },
    {
      "id": 2,
      "name": "Veggie Delight",
      "ingredients": "Dough, Tomato Sauce, Cheese, Mushrooms, Olives"
    }
  ]
}


Example Not Found Response (404):{ "error": "Restaurant not found" }



DELETE /restaurants/:id

Description: Deletes a restaurant and all related RestaurantPizzas.
Example Request:DELETE http://127.0.0.1:5000/restaurants/1


Example Success Response (204): (Empty response body)
Example Not Found Response (404):{ "error": "Restaurant not found" }



GET /pizzas

Description: Returns a list of all pizzas.
Example Request:GET http://127.0.0.1:5000/pizzas


Example Response:[
  {
    "id": 1,
    "name": "Pepperoni",
    "ingredients": "Dough, Tomato Sauce, Cheese, Pepperoni"
  },
  {
    "id": 2,
    "name": "Veggie Delight",
    "ingredients": "Dough, Tomato Sauce, Cheese, Mushrooms, Olives"
  },
  {
    "id": 3,
    "name": "Margherita",
    "ingredients": "Dough, Tomato Sauce, Mozzarella, Basil"
  },
  {
    "id": 4,
    "name": "Hawaiian",
    "ingredients": "Dough, Tomato Sauce, Cheese, Ham, Pineapple"
  }
]



POST /restaurant_pizzas

Description: Creates a new RestaurantPizza entry, linking a pizza to a restaurant with a specific price.
Validation:
price: Must be an integer between 1 and 30.
pizza_id: Must refer to an existing pizza.
restaurant_id: Must refer to an existing restaurant.


Example Request Body:{
  "price": 15,
  "pizza_id": 1,
  "restaurant_id": 2
}


Example Success Response (201 Created):{
  "id": 1,
  "pizza_id": 1,
  "restaurant_id": 2,
  "price": 15,
  "pizza": {
    "id": 1,
    "name": "Pepperoni",
    "ingredients": "Dough, Tomato Sauce, Cheese, Pepperoni"
  },
  "restaurant": {
    "id": 2,
    "name": "Pizza innit",
    "address": "South B"
  }
}


Example Error Response (400 Bad Request):{ "errors": ["Price must be between 1 and 30"] }



Testing with Postman
Step 1: Download Postman
If you don't have Postman, download it from https://www.postman.com/downloads/.
Step 2: Import the Postman Collection

Open Postman.
Click File > Import or the Import button in the top left corner.
Select the challenge-1-pizzas.postman_collection.json file from the repository.
The collection named "Pizza Restaurant API Challenge" will appear in the sidebar.

Step 3: Test the API

Ensure the Flask API is running (flask run).
Expand the imported collection in Postman.
Navigate through the folders for each resource (Restaurants, Pizzas, RestaurantPizzas).
Click on a request and hit Send to test the endpoint.
Observe the responses in the Postman client.

